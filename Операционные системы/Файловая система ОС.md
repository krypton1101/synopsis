---
date: 03.11.2023
tags:
  - theory
  - operational_systems
---
# Файл 
С одной стороны, это формально не определяемое понятие.
Сточки зрения смысла файл - множество данных, объединенных некоторой логической связью, т.е. одна и та же совокупность данных может рассматриваться как один или несколько файлов.

Признаки файла
1. файл объединяет множество данных
2. обладает именем
3. с целью долговременного и надежного хранения информации располагается на внешнем устройстве
4. предполагает многократное использования информации с разрывом во времени
5. предполагает совместное использование информации несколькими приложениями или пользователями, одновременно (разделяемый ресурс) или с разрывом во времени

# Файловая система
Файловая система как часть операционной системы это подсистема, включающая:
- наборы структур данных, используемых для управления файлами (каталоги файлов, дескрипторы файлов, таблицы распределения свободного и занятого пространства на диске)
- комплекс системных программных средств, реализующих управление файлами

Общая задача файловой системы состоит в предоставление пользователю логической модели для работы с файлами и отображении этой модели на физическую организацию внешнего устройства.

# Логическая модель
Логическая модель обеспечивает удобный для пользователя интерфейс и скрывает физическую организацию работы с внешними устройствами. Этот интерфейс обеспечивает следующие логические операции и средства:
- именование файлов
- поддержка различных типов файлов
- задание атрибутов файлов,
- организация хранения множества файлов
- поддержка логической организации файлов,
- предоставление программного интерфейса для работы с различными файлами

Отображение логической модели на физическую организацию внешнего устройства, или, что тоже, реализация этой модели на физическом уровне, предполагает следующее:
1. отображение (трансляция) имен файлов в адреса внешней памяти (сектора диска, адреса флэш- накопителя и т.п.)
2. размещение данных на устройстве
3. обеспечение доступа к данным
4. буферизация обмена
5. организаций совместного использования файлов (блокировка, предотвращение гонок и тупиков согласование копий и др.)
6. защита файлов одного пользователя от несанкционированного доступа другого
7. восстановление файлов в случае возникновения ошибок различного рода
8. обеспечение устойчивости файловой системы к сбоям питания и программно-аппаратным ошибкам
9. обеспечение работы с файлами в сети

# Логическая организация файловой системы
## Имена файлов
Правила формирования имен файлов определяются операционной системой и учитываются ограничения на используемые символы, длину и структуру имени.

**Например**, файловые системы ОС Unix различают символы верхнего и нижнего регистров (большие и малые буквы), тогда как для ОС семейства Windows регистр не учитывается.

Современные файловые системы, как правило, поддерживают длинные символьные имена файлов. Например, Windows NT в файловой системе NTFS устанавливает, что имя файла может содержать до 255 символов, не считая завершающего нулевого символа.

В некоторых системах одному и тому же файлу не может быть дано несколько разных имен (например, в ОС семейства Microsoft). В других такое ограничение отсутствует (например, «ОС UNIX). В последнем случае файл не имеет имени как такового. С каждым файлом ФС связывает индексный дескриптор, хранящий метаданные содержащие все характеристики файла. Имя файла является указателем на его метаданные и, как следствие, на одни и те же метаданные может указывать несколько указателей. Действия по заданию альтернативных имен (псевдонимов) осуществляются командами ОС.
## Расширение
Понятие расширения введена в MS DOS, OC UNIX она отсутствует. Тенденция развития ФС такова, что ограничение на структуру имени снимается и в ОС семейства Microsoft в имени файла может присутствовать более одной точки, однако в этих ОС последние символы после точки сохраняют свою роль, так как распознаются приложениями С другой стороны, в ОС UNIX также используются соглашения об именовании файлов, согласно которым тип файла в имени отделяется точкой.

## Типы файлов
Обычные файлы содержат информацию произвольного характера, которую заносит в них пользователь или программа, системная или пользовательская. Содержание такого файла определяется приложением, которое с ним работает. Системное или стандартное приложение создает и распознает файлы своего собственного формата (текстовый редактор Word файлы `.doc`, графическая программа Photoshop - `.psd`, пользовательское приложение интерпретирует содержимое файла в соответствии с задачей и способом ее решения.

## Каталог
**Каталог** - системный файл, содержащий системную информацию о группе файлов, его составляющих. В каталоге содержится список файлов, входящих в него, и устанавливается соответствие между файлами и их характеристиками (атрибутами). Двойственный смысл, вкладываемый в понятие каталог, практически не приводит к недоразумениям, так как в одном случае речь идет о схеме хранения файлов, а в другом о хранении информации, описывающей ту схему.

Каталог Unix - таблица, каждая запись которой соответствует некоторому файлу и содержит имя файла и указатель на дополнительную информацию - метаданные, хранящиеся в индексных дескрипторах.

Каталог MS DOS хранит имена файлов и целый ряд атрибутов - дату и времена создания, последнего доступа и изменения, текущий размер файла, признаки "только для чтения", "архивный файл", "скрытый файл", "системный файл", номер начального кластера файла.

## Специальные файлы
Специальные файлы это файлы, ассоциированные с устройствами ввода-вывода, которые позволяют пользователю выполнять операции ввода-вывода, используя обычные команды записи в файл или чтения из файла. Эти команды обрабатываются вначале программами файловой системы, а затем преобразуются ОС в команды управления соответствующим устройством.

## Символьная связь
Символьная связь (Unix) - особый тип файла, позволяющий косвенно адресовать другой файл.

Символьная связь создается командным путем с целью использования файла некоторого каталога другом каталоге. В итоге с точки зрения пользователя в его каталоге присутствует нужный файл, реально жетам присутствует символьная связь.

## Атрибуты файлов
Атрибут - это информация, описывающая некоторое свойство файла, или некоторая характеристика файла. В разных файловых системах могут использоваться разные атрибуты и их наборы, хотя реально для современных файловых систем как смысл атрибутов, так и их совокупности имеют тенденцию к сближению.

### Примеры атрибутов
- тип файла
- владелец файла (NTFS, Unix)
- создатель файла
- пароль для доступа к файлу (NTFS, Unix)
- информация о возможности доступа (права доступа) (NTFS, Unix)
- времена создания, последнего доступа и последнего изменения (везде)
- текущий размер файла (везде)
- максимальный размер файла
- признак "только для чтения"
- признак "скрытый файл" (FAT, NTFS)
- признак "системный файл", носят информативно-рекомендательный характер
- признак "архивный файл"
- признак "двоичный/символьный" (Unix)
- признак "временный" (удалить после завершения процесса) (Unix)
- признак блокировки (NTFS, Unix)
- длина записи
- указатель на ключевое поле в записи
- длина ключа

