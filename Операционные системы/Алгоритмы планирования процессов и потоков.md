---
date: 2023-10-13
tags:
  - theory
  - operational_systems
---
# Планирование процессов
Планирование процессов включает в себя решение следующих задач:
- определение момента времени для смены выполняемого процесса
- выбор процесса на выполнение из очереди готовых процессов

Типы планирования процессов:
- Динамический
- Статический

# Диспетчеризация
Диспетчеризация заключается в реализации найденного в результате планирования решения, т.е. в переключении процессора с одного потока на другой, и сводится к следующему:
- сохранение контекста текущего процесса
- загрузка контекста нового процесса
- запуск нового процесса

# Вытесняющие и невытесняющие алгоритмы планирования
**Невытесняющая многозадачность** (non-preemptive multitasking) - способ планирования процессов, при котором активный процесс выполняется до тех пор, пока он сам, по собственной инициативе, не отдаст управление планировщику операционной системы для того, чтобы тот выбрал из очереди другой готовый к выполнению процесс.

**Вытесняющая многозадачность** (preemptive multitasking) способ, при котором решение о переключении процессора с выполнения одного процесса на выполнение другого принимается операционной системой, а не самой активной задачей.

# Алгоритмы, основанные на квантовании
В соответствии с алгоритмами, основанными на квантовании, смена активного процесса происходит, если исчерпан квант процессорного времени, отведенный данному процессу.
![[IMG20231013103700_BURST002.jpg]]

> [!example] Задача
> Пусть в системе имеется в процессов, каждый из которых требует для своего выполнения примерно в единиц времени при монопольном использовании системы. Пусть q длина кванта. Через сколько времени выполнится первый процесс?
> ![[IMG20231013104108.jpg]]
> 
> Пусть в системе имеется в процессов, каждый из которых требует для своего выполнения примерно в единиц времени при монопольном использовании системы. Пусть q длина кванта. Через сколько времени выполнится первый процесс?
> 
> Решение:
> - Процесс проводит в ожидании следующего кванта время, равное q(n-1)
> - Необходимое для процесса количество циклов выполнения равно B/q
> - Тогда общее время ожидания= (q(n-1))\*(B/q) = B(n-1)

## Квантование с изменяющимся квантом

Пример алгоритма квантования с предпочтением процессов, интенсивно обращающихся к вводу-выводу:
- Пусть первоначально каждому процессу назначается достаточно большой квант, а величина каждого следующего кванта уменьшается до некоторой заранее заданной величины.
- В таком случае преимущество получают короткие задачи, а длительные вычисления будут проводиться в фоновом режиме.
- Пусть каждый следующий квант, выделяемый очередному процессу, больше предыдущего.
- Процессы, которые не полностью использовали выделенный им квант, могут получить компенсацию в виде привилегий при последующем обслуживании.

![[IMG20231013105733.jpg]]

# Алгоритмы, основанные на приоритетах
**Приоритет** - это число, характеризующее степень привилегированности процесса при использовании ресурсов вычислительной машины, в частности, процессорного времени. Чем выше приоритет процесса, тем значительное его привилегии и тем меньше времени он будет проводить в очередях.

Существует две разновидности алгоритмов приоритетного планирования:
- В системах с относительными приоритетами активный процесс выполняется до тех пор, пока он сам не покинет процессор, перейдя в состояние ожидания![[IMG20231013110436.jpg]]
- В системах с абсолютными приоритетами выполнение активного процесса прерывается еще при одном условии, если в очереди готовых процессов появился процесс, приоритет которого выше приоритета активного процесса![[IMG20231013110436~2.jpg]]

Обобщенный граф состояния процессов (потоков)
![[IMG20231013111025.jpg]]

# Планирование процессов в современных ОС
Общими для Windows NT и Unix являются следующие моменты:
- Диапазон приоритетов подразделяется на несколько классов.
- Часть диапазона отведена для процессов (потоков) с переменными приоритетами, часть для процессов (потоков) с фиксированными приоритетами. К последним относятся процессы реального времени, наиболее критичные ко времени и имеющие самые высокие приоритеты.
- При планировании процессов (потоков) с динамическими приоритетами приоритет процесса (потока), полностью исчерпавшего свой очередной квант времени, снижается; напротив, если квант полностью не исчерпан, приоритет повышается.

