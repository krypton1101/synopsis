# Протокол разрешения адресов (ARP, Address Resolution Protocol)
![[IMG20230403122227~2.jpg]]
1. На первом шаге происходит передача от протокола IP протоколу ARP примерно такое сообщение: "Какой MAC-адрес имеет интерфейс с адресом IP1?"
2. Работа протокола ARP начинается с просмотра собственной ARP-таблицы. Предположим, что среди содержащихся в ней записей отсутствует запрашиваемый IP-адрес.
3. В этом случае протокол ARP формирует ARP-запрос, вкладывает его в кадр протокола Ethernet и широковещательно рассылает. Заметим, что зона распространения ARP-запроса ограничивается сетью Ethernet1, так как на пути широковещательных кадров барьером стоит маршрутизатор.
4. Все интерфейсы сети Eyhernet1 получают ARP-запрос и направляют его "своему" протоколу ARP. ARP сравнивает указанный в запросе адрес IP1 с IP-адресом собственного интерфейса.
5. Протокол ARP, который констатировал совпадение, формирует ARP-ответ. В ARP-ответе маршрутизатор указывает локальный адрес MAC1, соответствующий адресу IP1 своего интерфейса, и отправляет его запрашивающему узлу.

Пример ARP-таблицы

IP-адрес|MAC-адрес|Тип записи
--|--|--
194.85.135.65|00E0F77F1920|динамический
194.85.135.75|008048EB7E60|динамический
194.85.60.21|008048EB7567|статический

# Система DNS
Домены верхнего уровня назначаются для каждой страны, а также для различных типов организаций. Имена этих доменов должны следовать международному стандарту ISO 3166. Для обозначения стран используются трехбуквенные и двухбуквенные аббревиатуры, а для различных типов организаций, например, следующие обозначения:
- com - коммерческие организации
- edu - образовательные организации
- gov
- org
- net

# Система адресации протокола IPv6
Новая (шестая) версия протокола IP внесла существенные изменения в систему адресации. Прежде всего это коснулось увеличения разрядности адреса: вместо 4 байт IP-адреса в версии IPv6 в новой версии под адрес отведено 16 байт. Это дает возможность пронумеровать огромное количество узлов ($3.4\cdot10^{38}$).

Главной целью изменения системы адресации было не механическое увеличение адресного пространства, а повышение эффективности работы стека TCP/IP в целом.

В новой версии IPv6 предусмотрено три основных типа адресов:
- индивидуальный адрес (unicast)
- Групповой адрес (multicast)
- Адрес произвольной рассылки (anycast)

Тип адреса определяется значением нескольких старших битов адреса, которые названы префиксом формата.

Индивидуальные адреса делятся на несколько подтипов, основным среди которых является глобальный агрегируемый уникальный адрес. В отличие от уникальных адресов узлов сети IPv4, которые состоят из двух полей - номеров сети и узла, - глобальные агрегируемые уникальные адреса IPv6 имеют более сложную структуру, включающую шесть полей.

- **Префикс формата (Format Prefix, FP)**
  для этого типа адресов имеет размер 3 бита и значение 001.
- **Поле TLA (Top-Level Aggregation)**
  Предназначено для идентификации сетей самых крупных поставщиков услуг. Конкретное значение этого поля представляет собой общую часть адресов, которыми располагает данный поставщик услуг. Сравнительно небольшое количество разрядов, отведенных под это поле (13), выбрано специально для ограничения размера таблиц маршрутизации в магистральных маршрутизаторах самого верхнего уровня Интернета. Это поле позволяет пронумеровать 8196 сетей поставщиков услуг верхнего уровня, а значит, число записей, описывающих маршрутизаторы между этими сетями, также будет ограничено значением 8196, что ускорит работу магистральных маршрутизаторов. Следующие 8 разрядов зарезервированы к будущее для расширения при необходимости поля TLA.
- **Поле NLA (Next-Level Aggregation)**
  Предназначено для нумерации сетей средних и мелких поставщиков услуг. Значительный размер поля NLA позволяет путем агре гирования адресов отразить многоуровневую иерархию поставщиков услуг.
- **Поле SLA (Site-Level Aggregation)**
  Предназначено для адресации подсетей отдельного абонента, например подсетей одной корпоративной сети.
- **Идентификатор интерфейса**
  Является аналогом номера узла в IPv4. Отличием версии ІРѵб является то, что в общем случае идентификатор интерфейса просто сотадает с его локальным (аппаратным) адресом, а не представляет собой произвольно назначенный администратором номер узла. Идентификатор интерфейса имеет длину 64 бита, что позволяет поместить туда МАС-адрес (48 бит), адрес конечного узла ATM (48 бит) или номер виртуального соединения АТМ (до 28 бит), а также, вероятно, даст возможность использовать локальные адреса технологий, которые могут появиться в будущем. Такой подход делает ненужным протокол ARP, поскольку процедура отображения IP-адреса на локальный адрес становится тривиальной она сводится к простому отбрасыванию старшей части адреса. Кроме того, в большинстве случаев отпадает необходимость ручного кофигурирования конечных узлов, так как младшую часть адреса - идентификатор интерфейса - узел узнает от аппаратуры (сетевого адаптера), а старшую - номер подсети - ему сообщает маршрутизатор.
