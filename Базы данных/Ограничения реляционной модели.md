---
date: 2023-09-27
tags:
  - theory
  - databases
---
# Функциональная зависимость между атрибутами

> [!NOTE] Определение
> $R=\langle H,S\rangle, H=\langle A_{1},\dots, A_{n}\rangle\; \mathcal{H}=\{A_{i}\}$
> $A\subseteq \mathcal{H}, A\neq \varnothing\quad A\to A_{i}$ для  $\exists i$ 
> Если записи из множества $S$ совпадают по некоторым атрибутам множества $A$, то они совпадают и по атрибуту $A_{i}$.
> 

> [!example] Пример
> $\sqsupset A=\{A_{1},\dots,A_{k}\}, k\leq n$
> Эти атрибуты функционально определяют атрибут $A_{i}$, если
> $\langle a_{1},\dots,a_{k},a_{k+1},\dots,a_{n}\rangle, \langle b_{1},\dots,b_{k},b_{k+1},\dots,b_{n}\rangle\in S$
> $a_{1}=b_{1}, \dots, a_{k}=b_{k}\implies a_{i}=b_{i}$
> 
> $A,B\subseteq \mathcal{H}\quad A\to B$ ($A$ функционально определяет $B$)

> [!note] Определение
> $R=\langle H,S\rangle, H=\langle A_{1},\dots, A_{n}\rangle\; \mathcal{H}=\{A_{i}\}$
> $K\subseteq \mathcal{H}$ называется потенциальным ключом отношения $R$, если 
> 1. $K\to \mathcal{H}$
> 2. $K'\subset K\implies K'\not\to \mathcal{H}$
> 

$K$ - минимальное такое множество (при удалении хоть одного элемента, первое условие перестает выполняться)

CK - candidate key - потенциальный ключ
PK - primary key - первичный ключ

Любое отношение имеет потенциальный ключ. Количество ключей не ограничено.
Суррогатные ключи - ключи, не несущие никакой информации о свойствах объекта.

> [!NOTE] Определение
> $R_{1}=\langle H_{1},S_{1}\rangle,\; R_{2}=\langle H_{2}, S_{2}\rangle\quad H_{1}=\langle A_{1},\dots A_{k},B_{1},\dots,B_{m}\rangle, H_{2}=\langle A_{1},\dots, A_{n}, C_{1}\dots,C_{k}\rangle$
> $A=\{A_{1},\dots,A_{k}\}=PK(R_{1})$
> $A$ - внешний ключ множества $R_{2}$ относительно $R_{1}$, если $\langle a_{1},\dots,a_{k},c_{1},\dots,c_{n}\rangle\in S_{2}\implies \exists b_{1},\dots,b_{m}\;\; \langle a_{1},\dots, a_{k},b_{1},\dots,b_{m}\rangle\in S_{1}$
> Первая запись (слева) называется дочерней второй (и наоборот, вторая - родительская запись первой).

Нарушение отношения внешнего ключа - единственное запрещенное теоретически действие в реляционных БД.


> [!NOTE] Определение
> Отношение находится в первой нормальной форме (1НФ), если все его атрибуты атомарны.

> [!example] Пример
> Поле ФИО можно разделить на поля Фамилия, Имя, Отчество.

> [!NOTE] Теорема
> Любое отношение можно привести к нормальной форме.

> [!NOTE] Определение
> Отношение находится во второй нормальной форме (2НФ), если:
> 1. Оно находится в 1НФ
> 2. Каждый неключевой атрибут функционально зависит только от первичного ключа.


> [!example] Пример
> В отношении с заголовком {Ученик, предмет, дата, учитель, оценка, оценка прописью} можно выделить отношение {оценка, оценка прописью} и отношение {предмет, дата, учитель}.

> [!NOTE] Теорема
> Любое отношение можно представить в виде внутреннего соединения конечного числа отношений, каждое из которых находится во второй нормальной форме.
> 

> [!NOTE] Определение
> Множество атрибутов $A$ неприводимо определяет атрибут $A_{i}$ ($A\to A_{i}$), если какое-либо собственное подмножество $B\subset A$, $B\not\to A_{i}$.

> [!NOTE] Определение
> Отношение находится в третьей нормальной форме (3НФ), если:
> 1. Оно находится во 2НФ
> 2. Каждый неключевой атрибут неприводимо зависит от первого ключа.

> [!NOTE] Теорема
> Любое отношение можно представить в виде внутреннего соединения конечного числа отношений, находящихся в 3НФ.
