---
date: 2024-03-22
tags:
  - theory
  - databases
---
# Информационная безопасность
Защите подлежат:
- данные в таблицах
- схемы
- таблицы

"Три кита" ИБ:
- конфиденциальность
- целостность
- доступность

**Субъект доступа** - тот, кто проводит операцию над объектом.

Субъекты доступа:
- пользователь
- группа
- роль

**Объект доступа** - единица, доступ к которой может быть регламентирован.

Действия над информацией:
- ознакомление
- генерация
- копирование/тиражирование
- передача
- хранение
- преобразование
- уничтожение

Объектом доступа может являться вся БД, таблица, запись, ячейка.

## Политика безопасности
Множество объектов $O$, множество субъектов $S$, множество действий $A$.

Подходы к безопасности:
1. **Оптимистический**
   Любая тройка $\langle o,s,a\rangle\quad o\in O, s\in S, a\in A$ трактуется как запретительная. Если такой тройки не нашлось - доступ разрешен.
2. **Пессимистический**
   Тройка $\langle o,s,a\rangle\quad o\in O, s\in S, a\in A$ трактуется как привилегия. Если тройки нет - действие запрещено.

Множество всех таких троек называется **политикой безопасности**.

**Санкционированный доступ** - соответствующий политике безопасности. **Несанкционированный** - не соответствующий.

**Аутентификация** (`AuthN`) - процесс подтверждения подлинности пользователя.

**Авторизация** (`AuthZ`) - процесс проверки, имеет ли аутентифицированный субъект право на совершение конкретного действия.

Способы аутентификации в СУБД:
- пароль пользователя
- системный пользователь
- Lightweight Directory Access Protocol - аутентификация на стороннем сервере или подключаемой библиотеке

## Криптографическая защита
**Firewall** - подсистема, производящая фильтрацию пакетов. Например, не пропускает пакеты из какой-либо подсети, по какому-либо порту и др.

**Шифрование** - способ изменить сообщение так, чтобы из зашифрованного сообщения нельзя было извлечь информацию и при необходимости его можно было расшифровать.

$f(m,k)$ - функция шифрования $f$ сообщения $m$ по ключу $k$.
$\forall m \;g(f(m,k),k)=m$ - функция дешифровки $g$.

Свойства, необходимые для функции шифровки (криптографической функции):
- необратимость по параметру $k$ (из известного результата и сообщения $m$ нельзя получить $k$)
- относительная быстрота выполнения $f(m,k)$ по известным $m$ и $k$
- невозможность восстановления $m$ из $f(m,k)$ при неизвестном $k$

Шифрование бывает:
- Симметричное - $m=g(f(m,k),k)$
- Асимметричное - $m=g(f(m,k),k'),\quad k\neq k'$
  $k$ - открытый ключ, по которому происходит шифрование, а $k'$ - секретный, известный только изготовителю ключей
  При этом желательно открытый ключ не передавать по ограниченным источникам (Man In The Middle).
  Также данный тип шифрования может использоваться для постановки цифровой подписи, когда публикуется ключ дешифровки $k'$, а сообщение передается без шифровки, но в конец дописывается зашифрованный конец сообщения. (сообщение + шифрованный конец сообщения) Такую подпись может поставить только владелец ключа., а проверить - каждый.
- Одностороннее - $\nexists g\; m=g(f(m,k),k')$
  Используется для генерации hash-ключей.

> При выдаче привилегии на команду (`select`, `update`, `insert` и другие) указание
> ```sql
> with grant option
> ```
> позволяет выдавать(`grant`), забирать(`revoke`) и др. эту опцию.

Для ограничения прав доступа можно использовать непрямые привилегии - вместо права на редактирование таблицы выдавать права на исполнение презаписанной функции.

Системы доступа - механизмы реализации политики доступа.
- Избирательный (дискреционный) доступ
  Самый распространенный вид.
  Различаются такие сущности, как пользователи, группы пользователей и привилегии. При этом каждый объект доступа имеет владельца, который задает привилегии каждой группе пользователей для этого объекта.
- Мандатный доступ
  Используется в гос. и военных структурах.
  Каждый субъект наделяется "уровнем благонадежности". Уровни благонадежности и уровни доступа (заданные для каждого объекта) составляют линейное упорядоченное множество (транзитивное, антисимметричное, отношение)
  
  $\langle X, \leq \rangle, \langle Y, \subseteq\rangle$ - частично упорядоченное множество, где $X$ - уровни допуска, $Y$ - уровни конфиденциальности
  $f:\;X\to Y$
  $f(x_{1}\leq x_{2})\implies f(x_{1}) \subseteq f(x_{2})$
  $x$ - уровень доверия, $f(x)$ - уровень допуска
  $x$ читает не выше $f(x)$ и пишет не ниже $f(x)$
  
  $X=Y\quad f=1$ - отображение элемента на самого себя
  $X=\langle X_{1}, X_{2}, \dots, X_{k}\rangle$
  1. $X_{i}$ - поддерево некоторого дерева $T_{i}$   $a\leq b$
  2. $X_{i}=\{a_{1},\dots,a_{n}\}\subseteq\{a_{1},\dots,a_{n},a_{n+1},\dots,a_{l}\}$
  3. $X_{i}\subseteq\{b_{1},\dots, b_{n}\}$

  $Y=\langle Y_{1}, Y_{2}, \dots, Y_{k}\rangle$
  $X\leq Y \iff X_{i}\leq Y_{i}\quad i=\overline{1,k}$
  
  Меточная безопасность
  В таблице к каждой записи приписывается поле `sec label`. Если уровень доступа пользователя меньше значения поля, он никаким образом не узнает о существовании этой записи.
- Ролевой доступ
  Rows & Columns Access Control (RCAC)
  Доступ к записям и столбцам таблицы дается в соответствии с ролями пользователя. Роль может иметь доступ к некоторым записям без изменений, с изменениями или не иметь доступа.
  Защита записей происходит на уровне SQL. Т.е. доступ может зависеть от некоторых таблиц или других данных в БД.

## Резервное копирование
В основном используется в контексте отказоустойчивости.

Простыми словами, **резервное копирование** - копия данных и структуры данных.

Процедура восстановление - восстановление структуры данных на месте поврежденных данных или в любом другом месте.

Есть три подхода к копированию:
- отдельная копия структуры и данных
  Обычно, все происходит с помощью встроенных SQL функций, сначала формируется структура, затем она заполняется данными.
  Сложности могут возникнуть, если в таблицах есть большие бинарные файлы, XML документы и др.
  PostgreSQL - `pg_dump`
  DB2 - `export`, `import` (Для одиночных таблиц), `db2look` (Для копирования структур), `db2move` (Для выгрузки данных)
- 
  DB2 - `backup database`, `restore database` (Копирует все в один файл)

**Дифференциальный** бэкап - один редкий общий бэкап, после бэкап измененных записей, затем бэкап измененных с прошлого дифференцированного бэкапа.
**Инкрементный** бэкап - один редкий общий бэкап, затем бэкап измененных записей с прошлого общего бэкапа. Плюс - быстрота восстановления.
**Непрерывный** бэкап - постоянное сохранение логов.

# OLAP & OLTP systems
Online Analytical Processing
Online Transaction Processing

- Управление операциями (OLTP)
- Система поддержки принятия решений (OLAP)
- Экспертная система

|                           | OLTP                                   | OLAP              |
| ------------------------- | -------------------------------------- | ----------------- |
| Объем транзакции          | малый                                  | большой           |
| Частота транзакций        | высокая                                | низкая            |
| Основные операции         | `insert`, `update`, `delete`, `select` | `select`          |
| Конкурентность доступа    | невысокая                              | почти отсутствует |
| Количество блокировок     | большое                                | почти отсутствует |
| Количество пользователей  | большое                                | малое             |
| Сложность SQL запросов    | низкая                                 | высокая           |
| Скорость изменения данных | высокая                                | очень низкая      |
MQT (Materialized Query Table) - реальные таблицы, определяемые запросом. Могут обновляться.

В DB2 используется технология Federated Database. Может показывать таблицы из других систем, как если бы они принадлежали DB2. При этом взаимодействие с таблицами передается тем системам.

